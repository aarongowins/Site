(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){function g(a){for(var b=0;b<a.state.activeLines.length;b++)a.removeLineClass(a.state.activeLines[b],"wrap",h),a.removeLineClass(a.state.activeLines[b],"background",i)}function j(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];e.empty()&&(e=a.getLineHandleVisualStart(e.head.line),c[c.length-1]!=e&&c.push(e))}a:if(d=
a.state.activeLines,d.length!=c.length)d=!1;else{for(e=0;e<d.length;e++)if(d[e]!=c[e]){d=!1;break a}d=!0}d||a.operation(function(){g(a);for(var b=0;b<c.length;b++)a.addLineClass(c[b],"wrap",h),a.addLineClass(c[b],"background",i);a.state.activeLines=c})}function k(a,b){j(a,b.ranges)}var h="CodeMirror-activeline",i="CodeMirror-activeline-background";f.defineOption("styleActiveLine",!1,function(a,b,c){c=c&&c!=f.Init;if(b&&!c){a.state.activeLines=[];j(a,a.listSelections());a.on("beforeSelectionChange",
k)}else if(!b&&c){a.off("beforeSelectionChange",k);g(a);delete a.state.activeLines}})});