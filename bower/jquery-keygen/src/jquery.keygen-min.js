(function(l,e){l.KeyGenerator=function(){var f="THE A AN AS AND OF OR".split(" "),h={199:"C",231:"c",252:"u",251:"u",250:"u",249:"u",233:"e",234:"e",235:"e",232:"e",226:"a",228:"a",224:"a",229:"a",225:"a",239:"i",238:"i",236:"i",237:"i",196:"A",197:"A",201:"E",230:"ae",198:"Ae",244:"o",246:"o",242:"o",243:"o",220:"U",255:"Y",214:"O",241:"n",209:"N"};return{generateKey:function(a,i){var i=e.extend({},i),d="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,j="number"==typeof i.maxKeyLength?i.maxKeyLength:
Infinity,a=e.trim(a);if(!a)return"";for(var b=[],c=0,k=a.length;c<k;c++){var l=h[a.charCodeAt(c)];b.push(l?l:a[c])}var a=b.join(""),g=[];e.each(a.split(/\s+/),function(b,a){a&&(a=a.replace(/[^a-zA-Z]/g,""),a=a.toUpperCase(),a.length&&g.push(a))});d&&g.join("").length>d&&(g=e.grep(g,function(a){return-1===e.inArray(a,f)}));if(0==g.length)d="";else if(1==g.length){b=g[0];a:{c=!1;for(k=0;k<b.length;k++)if(b[k]&&1===b[k].length&&-1!==b[k].search("[AEIOUY]"))c=!0;else if(c){c=b.substring(0,k+1);break a}c=
b}d=j<b.length||Math.abs(b.length-d)>=Math.abs(c.length-d)?c:b}else{var b=g.join("").length,m="";e.each(g,function(a,b){m+=b.charAt(0)});c=m;d=j<b||Math.abs(b-d)>=Math.abs(c.length-d)?c:g.join("")}j&&d.length>j&&(d=d.substr(0,j));return d}}};var n=l.KeyGenerator();e.fn.generateFrom=function(f,h){var a=e(this).first(),f=f.first(),h=e.extend({},{desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},h),i=function(j){var b=e(j.target),
c;c=function(){d(j);a.val();a.val()&&a.data("lastGeneratedValue")!==a.val()&&a.data("autosuggest",!1);if(!1!==a.data("autosuggest")){var e=n.generateKey(f.val(),{desiredKeyLength:h.desiredKeyLength,maxKeyLength:h.maxKeyLength});a.data("lastGeneratedValue",e);a.val(e)}b.is(":visible")&&b.data("checkHook",setTimeout(c,h.timeoutMS))};b.data("checkHook")||b.data("checkHook",setTimeout(c,0))},d=function(a){a=e(a.target);clearTimeout(a.data("checkHook"));a.removeData("checkHook")};f.attr("maxlength",h.maxNameLength);
a.attr("maxlength",h.maxKeyLength);a.css("text-transform","uppercase");document.activeElement&&document.activeElement===f[0]&&i({target:f[0]});f.focus(i);f.blur(d);return this}})(window,jQuery);