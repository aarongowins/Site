var Uri=function(k){for(var o="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),k=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(k||""),c={},l=14;l--;)c[o[l]]=k[l]||"";c.queryKey={};c[o[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c.queryKey[b]=d)});var p=new Query(c.query),
f=function(a){"undefined"!==typeof a&&(c.protocol=a);return c.protocol},m=null,n=function(a){"undefined"!==typeof a&&(m=a);return null===m?-1!==c.source.indexOf("//"):m},g=function(a){"undefined"!==typeof a&&(c.userInfo=a);return c.userInfo},e=function(a){"undefined"!==typeof a&&(c.host=a);return c.host},i=function(a){"undefined"!==typeof a&&(c.port=a);return c.port},j=function(a){"undefined"!==typeof a&&(c.path=a);return c.path},d=function(a){"undefined"!==typeof a&&(p=new Query(a));return p},h=
function(a){"undefined"!==typeof a&&(c.anchor=a);return c.anchor},q=function(){var a="",b=function(a){return null!==a&&""!==a};b(f())?(a+=f(),f().indexOf(":")!==f().length-1&&(a+=":"),a+="//"):n()&&b(e())&&(a+="//");b(g())&&b(e())&&(a+=g(),g().indexOf("@")!==g().length-1&&(a+="@"));b(e())&&(a+=e(),b(i())&&(a+=":"+i()));if(b(j()))a+=j();else if(b(e())&&(b(d().toString())||b(h())))a+="/";b(d().toString())&&(0!==d().toString().indexOf("?")&&(a+="?"),a+=d().toString());b(h())&&(0!==h().indexOf("#")&&
(a+="#"),a+=h());return a};return{protocol:f,hasAuthorityPrefix:n,userInfo:g,host:e,port:i,path:j,query:d,anchor:h,setProtocol:function(a){f(a);return this},setHasAuthorityPrefix:function(a){n(a);return this},setUserInfo:function(a){g(a);return this},setHost:function(a){e(a);return this},setPort:function(a){i(a);return this},setPath:function(a){j(a);return this},setQuery:function(a){d(a);return this},setAnchor:function(a){h(a);return this},getQueryParamValue:function(a){return d().getParamValue(a)},
getQueryParamValues:function(a){return d().getParamValues(a)},deleteQueryParam:function(a,b){2===arguments.length?d().deleteParam(a,b):d().deleteParam(a);return this},addQueryParam:function(a,b,c){3===arguments.length?d().addParam(a,b,c):d().addParam(a,b);return this},replaceQueryParam:function(a,b,c){3===arguments.length?d().replaceParam(a,b,c):d().replaceParam(a,b);return this},toString:q,clone:function(){return new Uri(q())}}};